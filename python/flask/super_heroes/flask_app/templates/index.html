<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Users</title>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3' crossorigin='anonymous'>
</head>
<body>
    
    <div class="container d-flex justify-content-around">
        <div class="col-4">
            <h1>All Users</h1>
            <table class="table table-striped table-dark">
                <tr>
                    <th>User</th>
                    <th>Email</th>
                </tr>
                {% for user in users %}
                <tr>
                    <td>{{user.first_name}}</td>
                    <td>{{user.email}}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
        <div class="text-left col-4">
            <h1>New User</h1>
            <form id="users-form" method="post">
                <label for="first_name">First:</label>
                <div class="form-item"><input type="text" name="first_name" id="first_name"></div>
                <label for="last_name">Last:</label>
                <div class="form-item"><input type="text" name="last_name" id="last_name"></div>
                <label for="email">Email:</label>
                <div class="form-item"><input type="email" name="email" id="email"></div>
                <input type="submit" value="Submit">
            </form>
            <script>
                var myForm = document.getElementById("users-form")
                myForm.onsubmit = function(e) {

                    e.preventDefault();

                    var form = new FormData(myForm);

                    fetch("http://localhost:5000/create", { method :'POST', body : form})
                        .then( response => response.json() )
                        .then( data => console.log(data) )
                        .catch( err => console.log(err))

                }
            </script>
        </div>

    </div>






    <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js' integrity='sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p' crossorigin='anonymous'></script>
</body>
</html>